<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>thss15fyt</title>
		<description>Welcome to my blog~</description>
		<link>http://localhost:4000</link>
		<atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>微信抢票｜利用SSH端口转发实现内网穿透</title>
				<description>&lt;p&gt;由于某些原因，清华校内网不再允许外网访问，给微信项目的本地开发造成了一定困难，为此可以SSH端口转发的方法进行“内网穿透”，即主动向外网服务器发起请求建立SSH通道，在服务器建立socket监听某个端口，将数据通过SSH通道发送给内网的本地服务器，处理后经同样方法进行回传。&lt;/p&gt;

&lt;p&gt;服务器端的配置方法见 &lt;a href=&quot;https://blog.magichc7.com/?p=5&amp;amp;from=timeline&quot;&gt;How to Set Up My First Server?&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;step-1&quot;&gt;STEP 1&lt;/h2&gt;
&lt;p&gt;修改服务器端nginx转发，将监听的80端口转发到闲置端口（以7000为例）:&lt;/p&gt;

&lt;p&gt;/etc/nginx/conf.d/wct.conf:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;location / {
 proxy_pass http://127.0.0.1:7000;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;step-2&quot;&gt;STEP 2&lt;/h2&gt;
&lt;p&gt;本地运行Django项目（假设运行在8000端口），并建立SSH远程转发，命令格式为：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh -R &amp;lt;remote port&amp;gt;:localhost:&amp;lt;local port&amp;gt; &amp;lt;username&amp;gt;@&amp;lt;host ip&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在本例中为：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh -R 7000:localhost:8000 ubuntu@&amp;lt;your ip&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;step-3&quot;&gt;STEP 3&lt;/h2&gt;
&lt;p&gt;经过以上两个步骤，即可通过服务器ip对本地运行的Django项目进行访问，但微信消息中的“绑定”、“帮助”等链接依然无法访问，这是因为获取的url仍为通过本地ip进行访问，为此需要对&lt;code class=&quot;highlighter-rouge&quot;&gt;config.json&lt;/code&gt;中的&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;SITE_DOMAIN&quot;&lt;/code&gt;进行修改：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;SITE_DOMAIN&quot;: &quot;http://&amp;lt;your_server_ip&amp;gt;&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
				<pubDate>Mon, 09 Oct 2017 00:00:00 +0800</pubDate>
				<link>http://localhost:4000/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/2017/10/09/WeChatTicket-ssh-portforwarding.html</link>
				<guid isPermaLink="true">http://localhost:4000/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/2017/10/09/WeChatTicket-ssh-portforwarding.html</guid>
			</item>
		
	</channel>
</rss>
